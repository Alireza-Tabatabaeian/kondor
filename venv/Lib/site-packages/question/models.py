from django.db import models
from .questionStatics import League, CourseModel


# Create your models here.
def question_image_path(self, filename):
    return 'q-images/{0}/{1}/{2}/{3}'.format(self.league, self.course, self.year, filename)


def option_image_path(self, filename):
    return 'o-images/{0}/{1}/{2}/{3}'.format(self.league, self.course, self.year, filename)


class Comprehensive(models.Model):
    text = models.TextField('Body')

    def __str__(self):
        return self.text


class Question(models.Model):
    course = models.ForeignKey('Course', verbose_name="Course", on_delete=models.PROTECT)
    league = models.IntegerField(choices=League.choices, null=True, blank=True)
    year_of = models.IntegerField('Year', null=True, blank=True)
    text = models.TextField('Question', null=True, blank=True)
    comprehensive = models.ForeignKey('Comprehensive', on_delete=models.PROTECT, null=True, blank=True)
    main_image = models.FileField(upload_to=question_image_path, null=True, blank=True)
    op1 = models.TextField('Option 1', null=True, blank=True)
    op_image1 = models.FileField('op1 Image', upload_to=option_image_path, null=True, blank=True)
    op2 = models.TextField('Option 2', null=True, blank=True)
    op_image2 = models.FileField('op2 Image', upload_to=option_image_path, null=True, blank=True)
    op3 = models.TextField('Option 3', null=True, blank=True)
    op_image3 = models.FileField('op3 Image', upload_to=option_image_path, null=True, blank=True)
    op4 = models.TextField('Option 4', null=True, blank=True)
    op_image4 = models.FileField('op4 Image', upload_to=option_image_path, null=True, blank=True)
    answer = models.IntegerField('Answer')

    def __str__(self):
        return "{0} - {1} - {2}".format(self.league, self.course, self.year_of)


class Course(models.Model):
    name = models.CharField('Name', max_length=50)
    league = models.IntegerField(choices=League.choices, null=True, blank=True)
    course_model = models.IntegerField(choices=CourseModel.choices, default=CourseModel.GENERAL)

    def __str__(self):
        if self.league:
            return "{} : {}".format(self.league, self.name)
        return "{}".format(self.name)
